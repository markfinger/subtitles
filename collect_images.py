import json
import os
import urllib

test_json = """[{"images": ["http://images.fineartamerica.com/images-medium-large/1-did-you-hear-that-joe-kozlowski.jpg", "https://i.chzbgr.com/maxW500/5922504704/h8B58E92E/", "http://www.pixoto.com/images-photography/nudes-and-boudoir/boudoir/did-you-hear-that-33681287.jpg", "http://www.redorbit.com/media/uploads/2012/01/health-011912-002-617x416.jpg"], "text": "Did you hear that?", "end": "00:02:40,922", "start": "00:02:39,091"}, {"images": ["http://940ee6dce6677fa01d25-0f55c9129972ac85d6b1f4e703468e6b.r99.cf2.rackcdn.com/products/pictures/207607.jpg", "http://farm3.static.flickr.com/2250/2259060424_087f78e329_m.jpg", "http://www.maclife.com/files/u129772/2010/06/24_term_full.jpg", "http://www.fantasyflightgames.com/ffg_content/x-wing/news/large-ships/tantive/tantive-box-left.png"], "text": "They shut down the main reactor.", "end": "00:02:42,609", "start": "00:02:41,051"}, {"images": ["http://blog.bearstrong.net/max256/uploaded_images/daytime-moon-711428.jpg", "http://aeonattire.com/wp-content/uploads/2013/09/blank_blog2-860x450.jpg", "https://www.scirra.com/images/articles/ss3_g.png", "https://www.scirra.com/images/articles/ss3_h.png"], "text": "We'll be destroyed for sure.", "end": "00:02:44,289", "start": "00:02:42,731"}, {"images": ["http://www.phil.my/blog/wp-content/uploads/2013/09/this_is_madness-11728.jpg", "https://fbcdn-sphotos-a-a.akamaihd.net/hphotos-ak-ash3/431907_657382944278382_1690508773_n.jpg", "http://pickuplabs.com/blog/wp-content/uploads/2011/05/sparta003zg4.jpg", "http://screamingheretic.com/wp-content/uploads/this_is_sparta3.jpg"], "text": "This is madness.", "end": "00:02:45,287", "start": "00:02:44,411"}, {"images": ["http://www.aculab.com/wp-content/uploads/2010/12/Dads-Army-Frazier-doomed.png", "http://www.americanprogress.org/wp-content/uploads/cartoons/2008/08/img/081408.jpg", "http://images.cafepress.com/image/30343005_400x400.jpg", "http://4.bp.blogspot.com/-bAxCETz4Hb8/Tpsko5qrtKI/AAAAAAAAAes/UWlgS2yuiOY/s400/054314450_were_doomed_answer_5_xlarge.jpg"], "text": "We're doomed.", "end": "00:02:56,120", "start": "00:02:54,971"}, {"images": ["http://www.tampabay.com/resources/images/blogs/80s/53460.jpg", "http://www.theawl.com/wp-content/uploads/2012/12/legolas-c3po.jpg", "http://aeonattire.com/wp-content/uploads/2013/09/blank_blog2-860x450.jpg", "http://www.previewsworld.com/catalogimages/STK_IMAGES/STK520001-540000/STK526840.jpg"], "text": "There'll be no escape\\nfor the princess this time.", "end": "00:03:03,122", "start": "00:02:58,651"}, {"images": ["http://www.channelate.com/comics/2009-05-13-whats-that.jpg", "http://a.images.blip.tv/CRCNA-WhatsThatMinistryShares821.jpg", "http://www.forzombies.net/wp-content/uploads/2012/08/WhatsThat.png", "http://damnsnaps.com/wp-content/uploads/2011/10/whats_that.jpg"], "text": "What's that?", "end": "00:03:05,286", "start": "00:03:04,251"}, {"images": ["http://www.geekalerts.com/u/voice-activated-r2-d2-robot.jpg", "http://www.rebelrocketry.com/R2D2/pics/R2-A.jpg", "http://cg.netfrost.net/wp-content/uploads/R2-D2-star-wars.jpg", "http://www.planetjune.com/blog/images/r2d2_animated.gif"], "text": "R2-D2, where are you?", "end": "00:04:45,840", "start": "00:04:43,531"}, {"images": ["http://upload.wikimedia.org/wikipedia/en/f/fd/At_Last_-_Etta_James.jpg", "http://upload.wikimedia.org/wikipedia/en/d/d9/Beyonc%C3%A9_-_At_Last.jpg", "http://cloud.freehandmusic.netdna-cdn.com/preview/530x4/warner/atlasthw.png", "http://upload.wikimedia.org/wikipedia/en/b/bd/Cyndi_Lauper-At_Last.jpg"], "text": "At last!", "end": "00:05:02,326", "start": "00:05:01,291"}, {"images": ["http://upload.wikimedia.org/wikipedia/en/4/45/Where_Have_You_Been.png", "http://upload.wikimedia.org/wikipedia/en/5/5f/Rihanna's_Where_Have_You_Been_video.jpg", "http://www.hollywoodreporter.com/sites/default/files/imagecache/thumbnail_570x321/2012/04/rihanna_where_have_you_been_video.jpg", "http://cdn.idolator.com/wp-content/uploads/2012/04/27/rihanna-where-have-you-been-600x450.jpg"], "text": "Where have you been?", "end": "00:05:04,123", "start": "00:05:02,451"}, {"images": ["http://media.wcnc.com/images/Michael+Jordan+Getty+Images+at+Bobcats+game+MJ+1.jpg", "http://l.yimg.com/ea/img/-/120220/one_direction2_17k2rfn-17k2rhg.jpeg?x=400&sig=ttTACONZcRcJwumlpBWjGw--", "http://cbscharlotte.files.wordpress.com/2013/09/175697754-e1380132068974.jpg?w=620&h=349&crop=1", "http://nbcprobasketballtalk.files.wordpress.com/2013/11/joe-johnson-steve-blake.png?w=320"], "text": "They're heading in this direction.", "end": "00:05:05,366", "start": "00:05:04,251"}, {"images": ["http://funfive.net/pictures/images/What%20Are%20We%20Going%20To%20Do%20Tonight,%20Brain.jpg", "http://www.sparkminute.com/wp-content/uploads/2010/12/BoringMeeting1.jpg", "http://n7ugc.disney.go.com/item/nyannyan/387_2gs11k6T9aQS0000185G10w0-h-fb4629-as/What%20are%20we%20going%20to%20do%20today%3F__600_450_q50.jpg", "http://d3sdoylwcs36el.cloudfront.net/content_curation_why_is_the_content_curator_the_key_emerging_online_editorial_role_of_the_future_what_does_the_content_curator_do_id1601371.jpg"], "text": "What are we going to do?", "end": "00:05:07,209", "start": "00:05:05,491"}, {"images": ["http://img3.wikia.nocookie.net/__cb20071220145503/starwars/images/c/cc/AttackOfTheEnergySpider(GlitterStimMines).JPG", "http://aeonattire.com/wp-content/uploads/2013/09/blank_blog2-860x450.jpg", "http://img1.wikia.nocookie.net/__cb20060326214922/starwars/images/1/14/Kessel_Miners.jpg", "http://img1.wikia.nocookie.net/__cb20070914173547/starwars/images/d/d5/Eaw_Kessel.jpg"], "text": "We'll be sent to\\nthe spice mines of Kessel...", "end": "00:05:09,003", "start": "00:05:07,331"}, {"images": ["http://www.outlet-sicilia.it/shop/web/wp-content/uploads/2013/09/blank_blog.jpg", "http://www.barberry.temashdesignlab.com/wp-content/uploads/2013/09/hd.jpg", "http://www.big-mag.org/wp-content/uploads/2013/09/blank_blog-860x450.jpg", "http://www.barberry.temashdesignlab.com/wp-content/uploads/2013/09/vodlo-homepage3.jpg"], "text": "smashed into who knows what!", "end": "00:05:10,530", "start": "00:05:09,131"}, {"images": ["http://fc09.deviantart.net/fs70/i/2013/152/2/a/wait_a_minute__where_are_you_going__by_scarydestiny-d67h64a.jpg", "http://imgc-cn.artprintimages.com/images/P-473-488-90/60/6065/D2AD100Z/posters/leo-cullum-wait-a-minute-where-am-i-going-i-m-a-writer-new-yorker-cartoon.jpg", "http://static.fjcdn.com/pictures/Wait+a+minute....+OC+and+a+true+story+How+funny.+I_73ca10_4118248.png", "http://images.rapgenius.com/f5fb0352c89935cba629bfcbc3680b45.1000x1000x1.jpg"], "text": "Wait a minute.\\nWhere are you going?", "end": "00:05:14,444", "start": "00:05:11,771"}, {"images": ["http://photos.jdhancock.com/images/5845280258/setup.jpg", "http://www.starwars.stopklatka.pl/images/choke.jpg", "http://images.wikia.com/starwars/images/e/e5/NotIntheMainComputer.jpg", "http://www.swtroopers.com/imp_costumes/imp_ofc_uni3.jpg"], "text": "<i>The Death Star plans\\nare not in the main computer.</i>", "end": "00:05:28,644", "start": "00:05:25,811"}, {"images": ["https://i.chzbgr.com/maxW500/1912324352/h1D77D0CD/", "https://i.chzbgr.com/maxW500/2794037760/h6C42A671/", "https://i.chzbgr.com/maxW500/2821003008/hEA279124/", "http://076dd0a50e0c1255009e-bd4b8aabaca29897bc751dfaf75b290c.r40.cf1.rackcdn.com/images/files/000/300/492/original/original.jpg"], "text": "Where are those transmissions\\nyou intercepted?", "end": "00:05:31,285", "start": "00:05:28,771"}, {"images": ["http://www.scifimoviezone.com/imagestarwars/sw4script040.jpg", "http://www.disassociated.com/images/posts/us_flying_saucer.jpg", "http://th06.deviantart.net/fs71/200H/i/2013/321/4/a/what_have_you_done_with_those_plans_by_empirestripsback-d6ulv4j.jpg", "http://1.bp.blogspot.com/-PkY9FEPh8Ic/Th-tO4h3C2I/AAAAAAAADjg/TKn-099tJVg/s1600/8964c117746040e5818faf533c388513_7.jpg"], "text": "What have you done with those plans?", "end": "00:05:34,084", "start": "00:05:31,411"}, {"images": ["https://i.chzbgr.com/maxW500/2978377984/h5CDBC2E9/", "http://ia.media-imdb.com/images/M/MV5BMTU4NTczODkwM15BMl5BanBnXkFtZTcwMzEyMTIyMw@@._V1_SY1200_CR78,0,630,1200_.jpg", "http://i183.photobucket.com/albums/x54/TrueX-Ray/TNG%20Caption%20This/tngcaption26c.jpg", "http://ia.media-imdb.com/images/M/MV5BMTU4NTczODkwM15BMl5BanBnXkFtZTcwMzEyMTIyMw@@._V1_SX67_CR0,0,67,98_.jpg"], "text": "We intercepted no transmissions.", "end": "00:05:36,930", "start": "00:05:34,211"}, {"images": ["http://img3.wikia.nocookie.net/__cb20080101120032/starwars/images/2/29/ConsularSalonPod-CCS.jpg", "http://www.skywlkr.net/idc/expansions/downloads/sav/full%20set/set%20images/original/68-ConsularShip.jpg", "http://chordian.net/media/SWTOR_Jedi_Consular_Ship.jpg", "http://img1.wikia.nocookie.net/__cb20090428165017/starwars/images/d/df/TantiveIVFinal.jpg"], "text": "This is a consular ship.", "end": "00:05:38,723", "start": "00:05:37,051"}, {"images": ["http://a.abcnews.com/images/Politics/ap_benghazi_hearing_kb_130508_wmain.jpg", "http://edwardcheever.files.wordpress.com/2010/06/statue-vador-diplomatic-mission6.jpg", "https://i.chzbgr.com/maxW500/738342144/hB8C3E21A/", "http://4.bp.blogspot.com/-HhnOA88BVII/UopRdrdBB-I/AAAAAAABQ7c/2UlsGHCPiCM/s1600/1.jpg"], "text": "We're on a diplomatic mission.", "end": "00:05:40,842", "start": "00:05:38,851"}, {"images": ["http://treasure.diylol.com/uploads/post/image/196562/resized_philosoraptor-meme-generator-if-this-is-a-consular-ship-where-is-the-ambassador-fdf795.jpg", "https://i.chzbgr.com/maxW500/3628390400/hD99D2DD8/", "http://gocomics.typepad.com/.a/6a00d8341c5f3053ef0148c819a36d970c-800wi", "https://i.chzbgr.com/maxW500/627454208/hC8415805/"], "text": "If this is a consular ship...", "end": "00:05:43,087", "start": "00:05:40,971"}, {"images": ["http://treasure.diylol.com/uploads/post/image/196562/resized_philosoraptor-meme-generator-if-this-is-a-consular-ship-where-is-the-ambassador-fdf795.jpg", "https://i.chzbgr.com/maxW500/3628390400/hD99D2DD8/", "http://24.media.tumblr.com/tumblr_lm710pKee31qz9vd8o1_500.gif", "http://4.bp.blogspot.com/_sN9bJT6jhTU/TJCF4jFn_iI/AAAAAAAAC-4/41tvP8qA5QQ/s1600/Rob%2520in%2520Tantive%2520IV%2520scene.jpg"], "text": "where is the ambassador?", "end": "00:05:45,327", "start": "00:05:43,211"}, {"images": ["http://076dd0a50e0c1255009e-bd4b8aabaca29897bc751dfaf75b290c.r40.cf1.rackcdn.com/images/files/000/300/462/original/original.jpg", "http://www.geeksofdoom.com/GoD/img/2007/05/2007-05-25-choke_lg.jpg", "http://25.media.tumblr.com/87509cc5a3561459e18151f512acbd71/tumblr_mgj0jiR4EG1rawb5do1_400.jpg", "http://flashmobrocks.com/blog/wp-content/uploads/2012/12/photo1.jpg"], "text": "Commander, tear this ship apart\\nuntil you've found those plans...", "end": "00:05:51,922", "start": "00:05:48,691"}, {"images": ["https://i.chzbgr.com/maxW500/1988635392/hEA3BDA83/", "https://i.chzbgr.com/maxW500/364174592/hCB216F3A/", "http://www.geeksofdoom.com/GoD/img/2007/05/2007-05-25-choke_lg.jpg", "http://s3.roosterteeth.com/images/JacyrH46601dfb69a7b.jpg"], "text": "and bring me the passengers!\\nI want them alive!", "end": "00:05:54,929", "start": "00:05:52,051"}, {"images": ["http://farm9.staticflickr.com/8218/8324375287_dde9f46717_o.jpg", "http://farm7.staticflickr.com/6025/5976606154_45ff67ec6c_o.jpg", "http://www.starwarsminute.com/wp-content/uploads/2013/06/0071.jpg", "http://fc04.deviantart.net/fs71/i/2013/108/d/0/there_s_one_set_for_stun____by_billy2917-d624afv.jpg"], "text": "There's one. Set for stun.", "end": "00:06:08,450", "start": "00:06:06,971"}, {"images": ["http://data2.whicdn.com/images/56946098/large.jpg", "http://25.media.tumblr.com/c032b95fcb4adb05cf332edc32f7ba91/tumblr_msryw7wDUL1riajaho1_1280.jpg", "http://static.spoonful.com/sites/default/files/styles/square_420x420/public/give-her-a-cookie-article-photo-260x260-kmackay-001.jpg?itok=x8kOHwGB", "http://a.wattpad.com/cover/6694858-256-k62305.jpg"], "text": "She'll be all right.", "end": "00:06:15,483", "start": "00:06:13,731"}, {"images": ["http://img2.wikia.nocookie.net/__cb20110810133200/starwars/images/2/2a/Dv-692.jpg", "http://www.theforce.net/celebration/gallery/toptenc4/Inform%20Lord%20Vader%20we%20have%20a%20prisoner!.jpg", "http://th08.deviantart.net/fs70/PRE/i/2013/062/0/5/inform_lord_vader_we_have_a_prisoner_by_penclguy-d5wu50u.jpg", "http://4.bp.blogspot.com/_xsmnOkPIZ1Q/THzy8pRP8mI/AAAAAAAAAkM/qKs-6MAfnk0/s1600/img102.jpg"], "text": "Inform Lord Vader we have a prisoner.", "end": "00:06:17,408", "start": "00:06:15,611"}, {"images": ["http://nothings.org/art/meatwars/lemon2.gif", "http://nothings.org/art/meatwars/kid1.gif", "http://blog.tdobson.net/wp-uploads/2013/07/p2200357.jpg", "http://3.bp.blogspot.com/-98O_Irg2GvQ/Uh5gjgVq6GI/AAAAAAACptM/1TCiKaCbsGk/s1600/Abandoned+City+Wu%CC%88nsdorf-Waldstadt-4764.jpg"], "text": "Hey! You're not permitted in there.\\nIt's restricted.", "end": "00:06:20,523", "start": "00:06:17,531"}, {"images": ["http://www.intuitive.com/blog/images/deactivate-facebook-1.png", "http://iggyphoto.com/wp-content/uploads/facebook-deactivated.jpg", "http://mattrefghi.com/wp-content/uploads/2011/06/fb.png", "http://www.ononesoftware.com/wp/wp-content/uploads/2010/01/yn-2011-06-17-at-2.57.09-PM1.jpg"], "text": "You'll be deactivated for sure.", "end": "00:06:23,290", "start": "00:06:20,651"}]"""

manifest = json.loads(test_json)

path = 'star-wars/images'
if not os.path.exists(path):
    os.makedirs(path)

for i, sub in enumerate(manifest):
    sub_path = path + '/%d' % (i + 1)
    if not os.path.exists(sub_path):
        os.makedirs(sub_path)
    for j, image in enumerate(sub['images']):
        image_dir = sub_path + '/%d' % (j + 1)
        if not os.path.exists(image_dir):
            os.makedirs(image_dir)
        filename = image.rstrip('/').split('/')[-1]
        image_path = image_dir + ('/%s' % filename)
        # import pdb; pdb.set_trace()
        urllib.urlretrieve(image, image_path)

# def write_manifest(manifest):
#     with open('star-wars/manifest.json', 'w') as manifest_file:
#         manifest_file.write(
#             json.dumps(manifest)
#         )
#